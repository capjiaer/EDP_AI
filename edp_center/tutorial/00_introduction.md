# EDP_AI æ¡†æ¶ä»‹ç»

[â† è¿”å›ç›®å½•](../TUTORIAL.md)

## è¿™æ˜¯ä»€ä¹ˆï¼Ÿ

**EDP_AI** æ˜¯ä¸€ä¸ªä¸“ä¸ºèŠ¯ç‰‡è®¾è®¡æµç¨‹ç®¡ç†è€Œè®¾è®¡çš„æ¡†æ¶ï¼Œå¸®åŠ©å·¥ç¨‹å¸ˆæ›´é«˜æ•ˆåœ°ç®¡ç†å¤æ‚çš„ EDA å·¥ä½œæµã€‚

### æ ¸å¿ƒä»·å€¼

- **ç»Ÿä¸€ç®¡ç†**ï¼šå°†åˆ†æ•£çš„è„šæœ¬ã€é…ç½®ã€æµç¨‹ç»Ÿä¸€ç®¡ç†
- **è‡ªåŠ¨åŒ–**ï¼šè‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»ã€é…ç½®åˆå¹¶ã€è„šæœ¬å±•å¼€
- **å¯æ‰©å±•**ï¼šé€šè¿‡ Hooks æœºåˆ¶è½»æ¾æ‰©å±•å’Œå®šåˆ¶
- **æ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„ç›®å½•ç»“æ„ã€é…ç½®æ ¼å¼ã€å·¥ä½œæµè§„èŒƒ

### é€‚ç”¨åœºæ™¯

- **èŠ¯ç‰‡è®¾è®¡å›¢é˜Ÿ**ï¼šç®¡ç†å¤šä¸ªé¡¹ç›®ã€å¤šä¸ªç‰ˆæœ¬ã€å¤šä¸ªç”¨æˆ·çš„å·¥ä½œæµ
- **EDA æµç¨‹å¼€å‘**ï¼šå¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²æ–°çš„ EDA æµç¨‹
- **é…ç½®ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†ä¸åŒé¡¹ç›®ã€ä¸åŒæµç¨‹çš„é…ç½®
- **è„šæœ¬å¤ç”¨**ï¼šé€šè¿‡æ¨¡å—åŒ–è®¾è®¡å®ç°è„šæœ¬çš„å¤ç”¨å’Œå…±äº«

---

## æ¶æ„æ¦‚è§ˆ

EDP_AI æ¡†æ¶ç”±å››ä¸ªæ ¸å¿ƒ KIT ç»„æˆï¼Œæ¯ä¸ª KIT è´Ÿè´£ä¸åŒçš„åŠŸèƒ½ï¼š

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         EDP_AI Framework            â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚             â”‚                 â”‚
                    â–¼             â–¼             â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ edp_dirkit   â”‚ â”‚edp_configkit â”‚ â”‚  edp_cmdkit  â”‚ â”‚ edp_flowkit  â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ Dir Mgmt     â”‚ â”‚ Config Load  â”‚ â”‚ Script Proc  â”‚ â”‚ Flow Exec    â”‚
        â”‚ Workspace    â”‚ â”‚ Config Merge â”‚ â”‚ #import      â”‚ â”‚ Dep Mgmt     â”‚
        â”‚ Init         â”‚ â”‚ YAMLâ†”Tcl     â”‚ â”‚ Expand       â”‚ â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                â”‚                â”‚                â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    WorkflowManager          â”‚
                    â”‚  Unified Workflow Interface â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å››ä¸ªæ ¸å¿ƒ KIT

1. **edp_dirkit** - ç›®å½•ç®¡ç†å’Œå·¥ä½œç©ºé—´åˆå§‹åŒ–
   - åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
   - åˆå§‹åŒ–ç”¨æˆ·å·¥ä½œç©ºé—´
   - ç®¡ç†åˆ†æ”¯

2. **edp_configkit** - é…ç½®æ–‡ä»¶çš„åŠ è½½ã€åˆå¹¶å’Œè½¬æ¢
   - å¤šå±‚çº§é…ç½®åŠ è½½ï¼ˆcommon â†’ project â†’ userï¼‰
   - YAML â†” Tcl æ ¼å¼è½¬æ¢
   - é…ç½®åˆå¹¶å’Œè¦†ç›–

3. **edp_cmdkit** - Tcl è„šæœ¬å¤„ç†
   - å±•å¼€ `#import` æŒ‡ä»¤
   - å¤„ç† Hooksï¼ˆstep.pre, step.post, sub_step.pre/post/replace ç­‰ï¼‰
   - ç”Ÿæˆæœ€ç»ˆå¯æ‰§è¡Œçš„è„šæœ¬

4. **edp_flowkit** - å·¥ä½œæµæ‰§è¡Œå’Œä¾èµ–ç®¡ç†
   - è§£æ `dependency.yaml` å»ºç«‹ä¾èµ–å›¾
   - è‡ªåŠ¨å‘ç°è·¨ flow ä¾èµ–
   - æŒ‰ä¾èµ–é¡ºåºæ‰§è¡Œæ­¥éª¤

---

## å·¥ä½œæµç¨‹å›¾

æ‰§è¡Œ `edp -run` å‘½ä»¤æ—¶çš„å®Œæ•´æµç¨‹ï¼š

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚      User Command                   â”‚
                    â”‚   edp -run pv_calibre.ipmerge       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  1. edp_dirkit: Init Workspace      â”‚
                    â”‚     â€¢ Check directory structure     â”‚
                    â”‚     â€¢ Create missing directories    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  2. edp_configkit: Load Config      â”‚
                    â”‚     â€¢ Load common config            â”‚
                    â”‚     â€¢ Load project config           â”‚
                    â”‚     â€¢ Load user config (highest)    â”‚
                    â”‚     â€¢ Merge config â†’ full.tcl       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  3. edp_flowkit: Parse Deps         â”‚
                    â”‚     â€¢ Read dependency.yaml          â”‚
                    â”‚     â€¢ Build dependency graph        â”‚
                    â”‚     â€¢ Check prerequisite steps      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  4. edp_cmdkit: Process Script      â”‚
                    â”‚     â€¢ Expand #import directives     â”‚
                    â”‚     â€¢ Insert Hooks                  â”‚
                    â”‚     â€¢ Generate script â†’ cmds/xxx.tclâ”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  5. edp_flowkit: Execute Command    â”‚
                    â”‚     â€¢ Local exec or LSF submit      â”‚
                    â”‚     â€¢ Record run status             â”‚
                    â”‚     â€¢ Update .run_info              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚    Complete!  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ä¸»è¦ç‰¹æ€§

### 1. å¤šå±‚çº§é…ç½®ç®¡ç†

é…ç½®æ–‡ä»¶æŒ‰ä¼˜å…ˆçº§ä»ä½åˆ°é«˜åŠ è½½ï¼ŒååŠ è½½çš„é…ç½®ä¼šè¦†ç›–å…ˆåŠ è½½çš„ï¼š

```
common/main/config.yaml          (æœ€ä½ä¼˜å…ˆçº§)
    â†“
common/{flow}/config.yaml
    â†“
{project}/main/config.yaml
    â†“
{project}/{flow}/config.yaml
    â†“
user_config.yaml                 (æœ€é«˜ä¼˜å…ˆçº§)
```

### 2. è‡ªåŠ¨ä¾èµ–ç®¡ç†

ç³»ç»Ÿè‡ªåŠ¨è§£æ `dependency.yaml`ï¼Œå»ºç«‹æ­¥éª¤ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼š

```
pnr_innovus.init
    â†“
pnr_innovus.place
    â†“
pnr_innovus.postroute
    â†“
pv_calibre.ipmerge
```

### 3. æ¨¡å—åŒ–è„šæœ¬è®¾è®¡

é€šè¿‡ `#import` æŒ‡ä»¤å®ç°è„šæœ¬çš„æ¨¡å—åŒ–ï¼š

```tcl
#import source helper.tcl      # åŠ è½½ proc å®šä¹‰
# ç›´æ¥å†™æ•£è£…ä»£ç ï¼Œæˆ–ä½¿ç”¨ #import source åŠ è½½ proc å®šä¹‰
```

### 4. Hooks æ‰©å±•æœºåˆ¶

åœ¨è„šæœ¬æ‰§è¡Œå‰åæ’å…¥è‡ªå®šä¹‰ä»£ç ï¼š

```
step.pre  â†’  ä¸»è„šæœ¬  â†’  step.post
```

---

## å¿«é€Ÿé¢„è§ˆ

ä¸€ä¸ªæœ€ç®€å•çš„ä½¿ç”¨ç¤ºä¾‹ï¼š

```bash
# 1. åˆå§‹åŒ–é¡¹ç›®
edp_init -init -prj dongting -v P85 --block block1 --user user1

# 2. è¿è¡Œæµç¨‹
cd /path/to/work/dongting/P85/block1/user1/main
edp -run pv_calibre.ipmerge
```

å°±è¿™ä¹ˆç®€å•ï¼æ¡†æ¶ä¼šè‡ªåŠ¨å¤„ç†ï¼š
- âœ… åŠ è½½å’Œåˆå¹¶é…ç½®
- âœ… è§£æä¾èµ–å…³ç³»
- âœ… å¤„ç†è„šæœ¬å’Œ Hooks
- âœ… æ‰§è¡Œå‘½ä»¤å¹¶è®°å½•çŠ¶æ€

---

## ä¸‹ä¸€æ­¥

- ğŸ“¦ [å®‰è£… EDP_AI æ¡†æ¶](01_installation.md)
- ğŸš€ [å¿«é€Ÿå¼€å§‹ä½ çš„ç¬¬ä¸€ä¸ªé¡¹ç›®](02_getting_started.md)

[â† è¿”å›ç›®å½•](../TUTORIAL.md)

